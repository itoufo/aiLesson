![一般社団法人 健全AI教育協会](/docs/images/common/haiia_logo.png)

# 第1章：Chain-of-Thought手法

## 学習目標

この章を終えると、以下のことができるようになります：

- Chain-of-Thought（CoT）の概念と効果を理解できる
- CoTを活用したプロンプトを作成できる
- 複雑な問題解決にAIを活用できる
- 段階的思考プロセスを設計できる

---

## 1.1 Chain-of-Thoughtとは

### 1.1.1 CoTの基本概念

**Chain-of-Thought（思考の連鎖）** は、AIに段階的な思考プロセスを踏ませることで、複雑な問題の回答精度を向上させる手法です。

![従来のプロンプト vs CoTプロンプト](/docs/images/02_応用/01_cot_vs_traditional.jpeg)

### 1.1.2 なぜCoTが効果的なのか

![CoTが効果的な理由](/docs/images/02_応用/01_cot_effectiveness.jpeg)

---

## 1.2 CoTプロンプトの種類

### 1.2.1 Zero-shot CoT

最もシンプルな形式。「ステップバイステップで考えてください」と指示を追加するだけ。

```markdown
【Zero-shot CoTの例】

質問：
ある会社の売上が前年比20%増加し、1200万円になりました。
前年の売上はいくらでしたか？

ステップバイステップで考えてください。

---
AIの回答例：
1. 今年の売上は1200万円です。
2. これは前年比20%増加した結果です。
3. 前年の売上をXとすると、X × 1.20 = 1200万円
4. X = 1200 ÷ 1.20 = 1000万円
5. したがって、前年の売上は1000万円でした。
```

### 1.2.2 Few-shot CoT

例を示してからCoT形式で回答させる方法。

```markdown
【Few-shot CoTの例】

以下の例を参考に、問題を解いてください。

【例題】
Q: 田中さんは500円持っています。250円の本を買うと残りはいくらですか？
A: まず、田中さんの所持金は500円です。
   次に、本の価格は250円です。
   残金 = 500 - 250 = 250円
   答え：250円

【問題】
Q: 山田さんは1000円持っています。380円のお弁当と150円のお茶を買うと
   残りはいくらですか？
A:
```

### 1.2.3 Self-Consistency CoT

同じ問題を複数回解かせ、最も多い回答を採用する方法。

```markdown
【Self-Consistency CoTの概念】

同じ問題を3回解かせる
  ↓
回答1: 150円
回答2: 150円
回答3: 160円（計算ミス）
  ↓
多数決で「150円」を採用
```

---

## 1.3 CoTの活用シーン

### 1.3.1 数学・論理問題

```markdown
【プロンプト例】

以下の問題を解いてください。
各ステップで計算過程と理由を明示してください。

問題：
ある店でセール中、定価の30%引きで商品を販売しています。
さらに会員はセール価格から10%引きになります。
定価5000円の商品を会員が購入すると、支払い額はいくらですか？

回答形式：
ステップ1: [処理内容]
計算: [計算式]
結果: [結果]

ステップ2: ...
```

### 1.3.2 ビジネス分析

```markdown
【プロンプト例】

以下のビジネス課題を分析してください。
MECE（漏れなく、重複なく）を意識して段階的に考えてください。

課題：
当社のECサイトの離脱率が高い原因を分析したい

分析ステップ：
1. 離脱率が高いとはどういう状態か定義
2. 離脱が起きるポイントを洗い出し
3. 各ポイントでの考えられる原因を列挙
4. 原因の優先度付け
5. 対策の方向性を提示
```

### 1.3.3 意思決定支援

```markdown
【プロンプト例】

以下の意思決定を支援してください。
メリット・デメリットを整理し、論理的に結論を導いてください。

検討事項：
新規事業として、AIチャットボットの開発サービスを始めるべきか

分析の観点：
1. 市場の魅力度（市場規模、成長性、競合状況）
2. 自社の適合度（技術力、リソース、シナジー）
3. リスク要因（技術リスク、市場リスク、財務リスク）
4. 総合評価と推奨
```

---

## 1.4 高度なCoTテクニック

### 1.4.1 Tree of Thoughts（ToT）

複数の思考経路を並行して探索し、最適な解を見つける手法。

![Tree of Thoughts の構造](/docs/images/02_応用/01_tree_of_thoughts.jpeg)

```markdown
【ToTプロンプト例】

問題：[問題文]

以下のプロセスで解答してください：

1. 3つの異なるアプローチを提案
2. 各アプローチの実現可能性を評価（高/中/低）
3. 最も有望なアプローチを選択して深掘り
4. 選択したアプローチで詳細な解決策を提示
```

### 1.4.2 ReAct（Reasoning + Acting）

推論（Reasoning）と行動（Acting）を交互に行う手法。

```markdown
【ReActの流れ】

Thought 1: 問題を理解する必要がある
Action 1: 問題文を分析する
Observation 1: ～という条件があることがわかった

Thought 2: 追加情報が必要だ
Action 2: 関連データを検索する
Observation 2: ～というデータが見つかった

Thought 3: データを基に分析できる
Action 3: 分析を実行する
Observation 3: ～という結果が得られた

Thought 4: 結論を導ける
Final Answer: ～
```

### 1.4.3 Plan-and-Solve

最初に計画を立て、それに沿って解決する手法。

```markdown
【Plan-and-Solveプロンプト例】

以下の問題を解決してください。

まず、解決のための計画を立ててください。
次に、計画に沿って各ステップを実行してください。

問題：
[問題文]

出力形式：
## 計画
1. [ステップ1の概要]
2. [ステップ2の概要]
3. ...

## 実行
### ステップ1: [タイトル]
[詳細な実行内容]

### ステップ2: [タイトル]
...

## 結論
[最終的な回答]
```

---

## 1.5 CoTの実践演習

### 演習1：ビジネス計算問題

```markdown
【問題】
A社は月間売上1億円、粗利率40%、固定費3000万円です。
来期は売上20%増を目指していますが、それに伴い
固定費も10%増加する見込みです。

来期の営業利益はいくらになりますか？
また、前期からの増減率は何%ですか？

CoTで回答してください。
```

### 演習2：原因分析

```markdown
【問題】
あなたの担当するWebサービスで、今月のユーザー登録数が
前月比30%減少しました。

考えられる原因を、以下のフレームワークで
段階的に分析してください：

1. 現象の整理（何が起きているか）
2. 原因の仮説立案（なぜ起きているか）
3. 仮説の検証方法
4. 対策案の提示
```

### 演習3：戦略立案

```markdown
【問題】
あなたは中堅SIerの経営企画担当です。
「3年以内にAI関連売上を全体の30%にする」という
目標が設定されました。

この目標を達成するための戦略を、
以下のステップで検討してください：

1. 現状分析（AI関連の現在の状況）
2. ギャップ分析（目標と現状の差）
3. 戦略オプションの列挙
4. 各オプションの評価
5. 推奨戦略と実行計画
```

---

## 1.6 CoTの注意点とベストプラクティス

### 1.6.1 CoTが適さないケース

| ケース | 理由 |
|--------|------|
| 単純な質問 | オーバーヘッドになる |
| 創造的なタスク | 論理的プロセスが馴染まない |
| 時間制約がある場合 | 回答生成に時間がかかる |
| 情報が不足している場合 | 推論の基盤がない |

### 1.6.2 ベストプラクティス

![CoT活用のベストプラクティス](/docs/images/02_応用/01_cot_best_practices.jpeg)

### 1.6.3 よくある失敗パターン

| 失敗パターン | 対策 |
|--------------|------|
| ステップが冗長すぎる | 必要なステップのみに絞る |
| 論理の飛躍がある | 各ステップの検証を促す |
| 途中で矛盾が生じる | 一貫性のチェックを指示 |
| 最終回答が不明確 | 「最終回答：」と明示させる |

---

## 確認クイズ

### Q1. Chain-of-Thoughtの効果
CoTが回答精度を向上させる主な理由は？

- [ ] A) AIの計算速度が上がるから
- [ ] B) 中間ステップを明示することで論理的な推論が促されるから
- [ ] C) インターネット検索が行われるから
- [ ] D) 複数のAIモデルが使用されるから

### Q2. Zero-shot CoT
Zero-shot CoTの特徴として正しいものは？

- [ ] A) 多数の例を示す必要がある
- [ ] B) 「ステップバイステップで考えてください」などの指示を追加するだけ
- [ ] C) 複数回の対話が必要
- [ ] D) 特定のドメインでしか使えない

### Q3. CoTの適用
CoTが最も効果的なのは次のうちどれ？

- [ ] A) 「今日の天気は？」という質問
- [ ] B) 「短い挨拶文を書いてください」という依頼
- [ ] C) 複数の条件を考慮した売上予測の計算
- [ ] D) 「赤いリンゴの画像を生成して」という依頼

---

## 章末まとめ

### 本章のポイント

1. **CoT**は段階的な思考プロセスを示させることで回答精度を向上
2. **Zero-shot CoT**は「ステップバイステップで」と指示するだけで実践可能
3. **Few-shot CoT**で例を示すとさらに精度向上
4. **Tree of Thoughts**や**Plan-and-Solve**などの発展手法も存在
5. 複雑な問題には有効だが、単純な問題にはオーバーヘッド

### 次章への準備

次章「情報整理と論理的表現」では、AIを使って情報を整理・構造化する方法を学びます。

---

## 参考資料

- Wei et al. "Chain-of-Thought Prompting Elicits Reasoning in Large Language Models" (2022)
- Yao et al. "Tree of Thoughts: Deliberate Problem Solving with Large Language Models" (2023)
- Kojima et al. "Large Language Models are Zero-Shot Reasoners" (2022)

---

©健全AI教育協会
